# VoLtKid - 六边形电路闯关游戏

## 项目概述

**VoLtKid** 是一款专为儿童设计的iOS电路基础知识学习游戏。采用创新的六边形网格系统和2.5D视觉效果，通过闯关模式让孩子们在游戏中轻松掌握电路原理、电子元件连接和基本的电学概念。

## 项目信息

- **项目名称**: VoLtKid
- **平台**: iOS / iPadOS / macOS / visionOS
- **开发语言**: Swift
- **UI框架**: SwiftUI
- **创建时间**: 2025年8月25日
- **开发工具**: Xcode 16.4
- **最低部署目标**: 
  - iOS 18.5
  - macOS 15.5
  - visionOS 2.5

## 游戏特色

### 🎮 核心玩法
- **六边形网格系统**: 独特的蜂窝状游戏地图，提供丰富的路径选择
- **角色移动闯关**: 控制可爱角色在网格上移动，踩踏激活电路元件
- **电路连线挑战**: 通过角色移动轨迹形成电路连接，点亮目标元件
- **2.5D视觉效果**: 精美的立体视觉设计，浮岛式关卡呈现

### 📱 游戏界面
1. **智能启动**: 首次启动显示教程，后续直接进入主页
2. **主页系统**: 集成角色选择、关卡进入、菜单设置
3. **新手教程**: 对话引导 + 操作演示，可重复触发
4. **关卡大地图**: 浮岛式关卡布局，2.5D立体效果
5. **游戏场景**: 六边形网格战场，实时电路连接反馈
6. **帮助系统**: 游戏玩法、电路知识、角色介绍三大板块

### 📚 学习内容
- **基础电路元件**: 电池、灯泡、开关等核心组件认知
- **电路连接原理**: 通过实际操作理解电流路径
- **逻辑思维训练**: 规划最优路径，培养空间思维能力
- **问题解决能力**: 面对不同关卡挑战，锻炼分析解决能力

### 🎨 设计亮点
- **无第三方依赖**: 纯SwiftUI + SpriteKit原生开发
- **智能启动流程**: 首次教程引导，后续直接进入主页
- **统一主页设计**: 集成所有核心功能的现代化界面
- **流畅动画效果**: 角色移动、元件激活、胜利特效
- **直观操作体验**: 点击移动，简单易懂的交互方式
- **渐进式难度**: 从基础电池灯泡到复杂电路网络
- **完善帮助系统**: 游戏、电路、角色三维度详细说明

## 技术架构

### 核心技术栈
- **SwiftUI 5.0**: 现代化声明式UI框架，负责界面布局和导航
- **SpriteKit**: 高性能2D游戏引擎，处理六边形网格和游戏逻辑
- **Swift 5.0**: 安全高效的开发语言，无第三方依赖
- **iOS 17+**: 充分利用最新系统特性和性能优化

### 系统架构设计
```
VoLtKid/
├── VoLtKid/                    # 主应用代码
│   ├── App/
│   │   └── VoLtKidApp.swift   # 应用入口点
│   ├── Models/
│   │   ├── GameState.swift    # 全局游戏状态管理
│   │   └── Level.swift        # 关卡数据模型
│   ├── Views/
│   │   ├── AppEntryView.swift  # 应用入口视图
│   │   ├── CoverView.swift     # 封面页（首次启动）
│   │   ├── MainHomeView.swift  # 主页（常驻主页）
│   │   ├── TutorialDialogView.swift # 新手教程对话
│   │   ├── TutorialGameView.swift   # 新手教程游戏
│   │   ├── MainMenuView.swift  # 主页菜单
│   │   ├── HelpView.swift      # 帮助页面
│   │   ├── SelectRoleView.swift # 角色选择页
│   │   ├── LevelMapView.swift  # 关卡大地图
│   │   ├── GameView.swift      # 游戏主界面
│   │   ├── PauseMenuView.swift # 游戏暂停菜单
│   │   └── APNGImageView.swift # APNG动画组件
│   ├── Game/
│   │   ├── HexScene.swift     # SpriteKit游戏场景
│   │   ├── Utils/
│   │   │   └── HexMap.swift   # 六边形网格系统
│   │   └── Entities/
│   │       └── Component.swift # 电路元件实体
│   └── Resources/
│       ├── Cover/             # 封面资源（背景+logo动画）
│       ├── Roles/             # 角色APNG文件
│       ├── Levels/            # 关卡配置JSON
│       └── Atlas/             # 游戏素材图集
├── VoLtKidTests/              # 单元测试
└── VoLtKidUITests/           # UI测试
```

### 关键技术特点
- **六边形网格**: Axial坐标系统，支持精确的网格计算和路径查找
- **A*路径算法**: 智能寻路，确保角色移动的最优路径
- **状态管理**: 单例模式管理游戏进度和角色选择
- **智能启动判断**: 基于UserDefaults的首次启动检测
- **本地数据持久化**: 自动保存用户设置和游戏进度
- **模块化组件设计**: 高度复用的UI组件系统
- **跨平台兼容**: 条件编译处理iOS/macOS API差异

### 支持平台
- **iPhone**: 支持竖屏和横屏模式
- **iPad**: 全方向支持，适配大屏幕操作
- **macOS**: 跨平台体验
- **Vision Pro**: 沉浸式学习体验

## 开发计划

### 🏗️ 第一阶段 - 项目基础架构
- [ ] **项目基础设置**: 配置SwiftUI + SpriteKit项目结构
- [ ] **资源目录建立**: 创建完整的Resources目录体系
- [ ] **数据模型设计**: 实现GameState、Level、ComponentData等核心模型
- [ ] **导航系统**: 建立四个页面间的导航逻辑

### 🎨 第二阶段 - 核心界面实现  
- [ ] **封面页**: 背景图片 + APNG logo动画 + 开始按钮
- [ ] **角色选择页**: 横向TabView + 缩放动画 + 状态保存
- [ ] **关卡大地图**: 浮岛ScrollView + 2.5D视觉效果 + 交互
- [ ] **基础UI组件**: APNG播放器、自定义按钮样式

### 🎮 第三阶段 - 游戏核心系统
- [ ] **六边形网格**: Axial坐标系统 + 像素转换 + 邻居计算
- [ ] **游戏场景**: SpriteKit HexScene + 网格渲染 + 元件放置
- [ ] **玩家移动**: A*路径查找 + 移动动画 + 元件激活
- [ ] **交互系统**: 触摸事件处理 + 状态切换

### ⚡ 第四阶段 - 电路逻辑与完善
- [ ] **电路连接**: 导线绘制 + 连通性检测 + 闭合回路判定
- [ ] **胜利条件**: 回路检测 + 胜利动画 + 关卡完成
- [ ] **关卡系统**: levels.json配置 + 难度设计 + 进度保存
- [ ] **视觉效果**: 元件高亮 + 回路闪光 + 角色动画

### 🎯 第五阶段 - 内容与优化
- [ ] **资源集成**: 替换占位图片 + 优化动画帧 + 音效添加
- [ ] **关卡内容**: 扩展电路元件类型 + 设计复杂关卡
- [ ] **性能优化**: 内存管理 + 渲染优化 + 设备适配
- [ ] **发布准备**: 最终测试 + App Store准备

> 详细的任务分解和进度跟踪请参考 [TODO.md](TODO.md)

## 安装和运行

### 系统要求
- **开发环境**: Xcode 16.4+ / macOS 15.5+
- **目标平台**: iOS 17+ / iPadOS 17+ / macOS 14+ / visionOS 2.5+
- **开发语言**: Swift 5.0
- **UI框架**: SwiftUI 5.0 + SpriteKit

### 快速开始
1. **克隆项目**
   ```bash
   git clone https://github.com/your-username/VoLtKid.git
   cd VoLtKid
   ```

2. **打开项目**
   ```bash
   open VoLtKid.xcodeproj
   ```

3. **配置资源** (首次运行)
   - 在 `Resources/Cover/` 放置封面背景和logo动画
   - 在 `Resources/Roles/` 添加角色APNG文件
   - 在 `Resources/Atlas/` 放置游戏素材
   - 确认 `levels.json` 配置正确

4. **运行项目**
   - 选择目标设备（模拟器或真机）
   - 按 `Cmd+R` 或点击运行按钮

## 游戏机制详解

### 🎯 核心玩法机制
1. **点击角色** → 进入连线模式（角色高亮显示）
2. **点击元件** → 角色自动寻路移动到目标位置
3. **踩踏激活** → 到达元件位置后自动激活并高亮显示
4. **形成回路** → 当移动轨迹形成闭合电路时触发胜利

### ⚡ 电路元件类型
- **🔋 电池 (Battery)**: 提供电源，电路起始点
- **💡 灯泡 (Bulb)**: 目标元件，需要被点亮
- **🔘 开关 (Switch)**: 控制电路通断
- **🔌 连接器**: 用于复杂电路的连接点

### 🗺️ 六边形网格系统
- **Axial坐标**: 使用(q,r)坐标系统进行精确定位
- **邻居查找**: 每个六边形有6个相邻位置
- **A*寻路**: 智能计算最短移动路径
- **边界检测**: 自动处理网格边界限制

## 开发指南

### 🛠️ 开发环境配置
1. **必需工具**
   - Xcode 16.4+
   - iOS 17+ SDK
   - Git版本控制

2. **项目设置**
   - 无第三方依赖，纯原生Swift开发
   - 支持iOS模拟器和真机调试
   - 自动代码签名配置

### 📝 代码规范
- **注释标准**: 使用JSDoc格式，为公共接口提供详细文档
- **命名约定**: 遵循Swift官方命名规范
- **文件组织**: 按功能模块划分目录结构
- **测试要求**: 为核心功能编写单元测试

### 🎨 资源管理
- **图片格式**: PNG格式，支持透明背景
- **动画格式**: APNG格式，支持序列帧动画
- **配置文件**: JSON格式，便于关卡数据编辑
- **命名规范**: 使用描述性文件名，便于资源管理

## 联系方式

- **开发团队**: VoLtKid Team
- **Bundle ID**: team.VoLtKid
- **版本**: 1.0
- **更新日期**: 2025年8月25日

## 许可证

本项目采用 [MIT License](LICENSE) 开源协议。

## 更新日志

### v1.0 (2025-08-25)
- 🎉 项目初始化，确立六边形电路闯关游戏概念
- ✨ 设计完整的四页面应用架构
- 📱 配置iOS 17+多平台支持
- 🔧 建立SwiftUI + SpriteKit技术栈
- 📋 创建详细的开发任务清单和进度跟踪

### 开发里程碑
- **当前状态**: 项目规划完成，等待开发实施
- **下一目标**: 建立基础项目架构和资源目录
- **预期完成**: 按五个开发阶段循序渐进实现

---

**让我们一起为孩子们创造一个有趣的六边形电路学习世界！** ⚡️🎮📚🔥
