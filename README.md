# VoLtKid - 六边形电路闯关游戏

## 项目概述

**VoLtKid** 是一款专为儿童设计的iOS电路基础知识学习游戏。采用创新的六边形网格系统和2.5D视觉效果，通过闯关模式让孩子们在游戏中轻松掌握电路原理、电子元件连接和基本的电学概念。

## 项目信息

- **项目名称**: VoLtKid
- **平台**: iOS / iPadOS / macOS / visionOS
- **开发语言**: Swift
- **UI框架**: SwiftUI + SpriteKit
- **项目状态**: ✅ 完整功能已实现
- **创建时间**: 2025年8月25日
- **完成时间**: 2025年12月24日
- **开发工具**: Xcode 16.4
- **最低部署目标**: 
  - iOS 18.5
  - macOS 15.5
  - visionOS 2.5

## 游戏特色

### 🎮 核心玩法
- **六边形网格系统**: 独特的蜂窝状游戏地图，提供丰富的路径选择
- **角色移动闯关**: 控制可爱角色在网格上移动，踩踏激活电路元件
- **电路连线挑战**: 通过角色移动轨迹形成电路连接，点亮目标元件
- **2.5D视觉效果**: 精美的立体视觉设计，浮岛式关卡呈现

### 📱 游戏界面
1. **智能启动**: 首次启动显示教程，后续直接进入主页
2. **主页系统**: 集成角色选择、关卡进入、菜单设置
3. **新手教程**: 对话引导 + 操作演示，可重复触发
4. **关卡大地图**: 浮岛式关卡布局，2.5D立体效果
5. **游戏场景**: 六边形网格战场，实时电路连接反馈
6. **帮助系统**: 游戏玩法、电路知识、角色介绍三大板块

### 📚 学习内容
- **基础电路元件**: 电池、灯泡、开关等核心组件认知
- **电路连接原理**: 通过实际操作理解电流路径
- **逻辑思维训练**: 规划最优路径，培养空间思维能力
- **问题解决能力**: 面对不同关卡挑战，锻炼分析解决能力

### 🎨 设计亮点
- **无第三方依赖**: 纯SwiftUI + SpriteKit原生开发
- **智能启动流程**: 首次教程引导，后续直接进入主页
- **统一主页设计**: 集成所有核心功能的现代化界面
- **流畅动画效果**: 角色移动、元件激活、胜利特效
- **直观操作体验**: 点击移动，简单易懂的交互方式
- **渐进式难度**: 从基础电池灯泡到复杂电路网络
- **完善帮助系统**: 游戏、电路、角色三维度详细说明

## 技术架构

### 核心技术栈
- **SwiftUI 5.0**: 现代化声明式UI框架，负责界面布局和导航
- **SpriteKit**: 高性能2D游戏引擎，处理六边形网格和游戏逻辑
- **Swift 5.0**: 安全高效的开发语言，无第三方依赖
- **iOS 17+**: 充分利用最新系统特性和性能优化

### 系统架构设计
```
VoLtKid/
├── VoLtKid/                    # 主应用代码
│   ├── VoLtKidApp.swift       # 应用入口点
│   ├── Models/
│   │   ├── GameState.swift    # 全局游戏状态管理 ✅
│   │   ├── Level.swift        # 关卡数据模型 ✅
│   │   └── CharacterConfig.swift # 角色配置管理 ✅
│   ├── Views/
│   │   ├── AppEntryView.swift  # 应用入口视图 ✅
│   │   ├── LoginView.swift     # 登录页面 ✅
│   │   ├── CoverView.swift     # 封面页（备用）✅
│   │   ├── MainHomeView.swift  # 主页（常驻主页）✅
│   │   ├── TutorialDialogView.swift # 新手教程对话 ✅
│   │   ├── TutorialGameView.swift   # 新手教程游戏 ✅
│   │   ├── MainMenuView.swift  # 主页菜单 ✅
│   │   ├── HelpView.swift      # 帮助页面 ✅
│   │   ├── SelectRoleView.swift # 角色选择页 ✅
│   │   ├── LevelMapView.swift  # 关卡大地图 ✅
│   │   ├── GameView.swift      # 游戏主界面 ✅
│   │   ├── PauseMenuView.swift # 游戏暂停菜单 ✅
│   │   └── APNGImageView.swift # APNG动画组件 ✅
│   ├── Game/
│   │   ├── HexScene.swift     # SpriteKit游戏场景 ✅
│   │   ├── Utils/
│   │   │   └── HexMap.swift   # 六边形网格系统 ✅
│   │   └── Entities/           # 电路元件实体 ✅
│   └── Resources/
│       ├── Cover/             # 封面资源（背景+logo动画）✅
│       ├── Roles/             # 角色APNG文件 ✅
│       ├── Levels/            # 关卡配置JSON ✅
│       └── Atlas/             # 游戏素材图集 ✅
├── VoLtKidTests/              # 单元测试
└── VoLtKidUITests/           # UI测试
```

### 关键技术特点
- **六边形网格**: Axial坐标系统，支持精确的网格计算和路径查找
- **A*路径算法**: 智能寻路，确保角色移动的最优路径
- **状态管理**: 单例模式管理游戏进度和角色选择
- **角色系统**: CharacterConfig统一管理，支持全局角色同步
- **交互式教程**: 手指动画引导 + 步骤化教学系统
- **智能启动流程**: 首次启动自动进入教程，后续直接主页
- **撤销机制**: 完整的游戏状态历史记录和回滚系统
- **提示系统**: 智能识别下一步操作并提供视觉提示
- **本地数据持久化**: 自动保存用户设置和游戏进度
- **模块化组件设计**: 高度复用的UI组件系统
- **跨平台兼容**: 条件编译处理iOS/macOS API差异

### 支持平台
- **iPhone**: 支持竖屏和横屏模式
- **iPad**: 全方向支持，适配大屏幕操作
- **macOS**: 跨平台体验
- **Vision Pro**: 沉浸式学习体验

## 开发进度

### ✅ 第一阶段 - 项目基础架构 (已完成)
- [x] **项目基础设置**: 配置SwiftUI + SpriteKit项目结构
- [x] **资源目录建立**: 创建完整的Resources目录体系
- [x] **数据模型设计**: 实现GameState、Level、ComponentData等核心模型
- [x] **导航系统**: 建立多页面间的导航逻辑

### ✅ 第二阶段 - 核心界面实现 (已完成)
- [x] **登录页面**: 背景渐变 + 动态角色动画 + 进入游戏按钮
- [x] **主页系统**: 统一主页设计，集成角色选择、关卡进入等功能
- [x] **角色选择**: 多角色选择界面 + 角色统一管理系统
- [x] **关卡大地图**: 浮岛ScrollView + 2.5D视觉效果 + 交互
- [x] **基础UI组件**: APNG播放器、自定义按钮样式
- [x] **帮助系统**: 游戏玩法、电路知识、角色介绍三大板块

### ✅ 第三阶段 - 游戏核心系统 (已完成)
- [x] **六边形网格**: Axial坐标系统 + 像素转换 + 邻居计算
- [x] **游戏场景**: SpriteKit HexScene + 网格渲染 + 元件放置
- [x] **玩家移动**: A*路径查找 + 移动动画 + 元件激活
- [x] **交互系统**: 触摸事件处理 + 状态切换

### ✅ 第四阶段 - 电路逻辑与完善 (已完成)
- [x] **电路连接**: 导线绘制 + 连通性检测 + 闭合回路判定
- [x] **胜利条件**: 回路检测 + 胜利动画 + 关卡完成
- [x] **关卡系统**: levels.json配置 + 难度设计 + 进度保存
- [x] **视觉效果**: 元件高亮 + 回路闪光 + 角色动画

### ✅ 第五阶段 - 教程与优化 (已完成)
- [x] **新手教程**: 对话引导 + 交互式游戏教程
- [x] **角色系统**: 全局角色统一 + 角色配置管理
- [x] **用户体验**: 首次启动检测 + 教程重定向
- [x] **界面优化**: 按钮样式统一 + 背景框移除
- [x] **功能完善**: 提示系统 + 撤销功能 + 历史记录

### 🎯 第六阶段 - 后续优化计划
- [ ] **关卡内容扩展**: 增加更多电路元件类型和复杂关卡
- [ ] **音效系统**: 添加背景音乐和音效反馈
- [ ] **成就系统**: 添加游戏成就和奖励机制
- [ ] **性能优化**: 内存管理优化和设备适配
- [ ] **发布准备**: 最终测试 + App Store准备

> 详细的任务分解和进度跟踪请参考 [TODO.md](TODO.md)

## 安装和运行

### 系统要求
- **开发环境**: Xcode 16.4+ / macOS 15.5+
- **目标平台**: iOS 17+ / iPadOS 17+ / macOS 14+ / visionOS 2.5+
- **开发语言**: Swift 5.0
- **UI框架**: SwiftUI 5.0 + SpriteKit

### 快速开始
1. **克隆项目**
   ```bash
   git clone https://github.com/your-username/VoLtKid.git
   cd VoLtKid
   ```

2. **打开项目**
   ```bash
   open VoLtKid.xcodeproj
   ```

3. **配置资源** (首次运行)
   - 在 `Resources/Cover/` 放置封面背景和logo动画
   - 在 `Resources/Roles/` 添加角色APNG文件
   - 在 `Resources/Atlas/` 放置游戏素材
   - 确认 `levels.json` 配置正确

4. **运行项目**
   - 选择目标设备（模拟器或真机）
   - 按 `Cmd+R` 或点击运行按钮

## 游戏机制详解

### 🎯 核心玩法机制
1. **点击角色** → 进入连线模式（角色高亮显示）
2. **点击元件** → 角色自动寻路移动到目标位置
3. **踩踏激活** → 到达元件位置后自动激活并高亮显示
4. **形成回路** → 当移动轨迹形成闭合电路时触发胜利

### ⚡ 电路元件类型
- **🔋 电池 (Battery)**: 提供电源，电路起始点
- **💡 灯泡 (Bulb)**: 目标元件，需要被点亮
- **🔘 开关 (Switch)**: 控制电路通断
- **🔌 连接器**: 用于复杂电路的连接点

### 🗺️ 六边形网格系统
- **Axial坐标**: 使用(q,r)坐标系统进行精确定位
- **邻居查找**: 每个六边形有6个相邻位置
- **A*寻路**: 智能计算最短移动路径
- **边界检测**: 自动处理网格边界限制

## 开发指南

### 🛠️ 开发环境配置
1. **必需工具**
   - Xcode 16.4+
   - iOS 17+ SDK
   - Git版本控制

2. **项目设置**
   - 无第三方依赖，纯原生Swift开发
   - 支持iOS模拟器和真机调试
   - 自动代码签名配置

### 📝 代码规范
- **注释标准**: 使用JSDoc格式，为公共接口提供详细文档
- **命名约定**: 遵循Swift官方命名规范
- **文件组织**: 按功能模块划分目录结构
- **测试要求**: 为核心功能编写单元测试

### 🎨 资源管理
- **图片格式**: PNG格式，支持透明背景
- **动画格式**: APNG格式，支持序列帧动画
- **配置文件**: JSON格式，便于关卡数据编辑
- **命名规范**: 使用描述性文件名，便于资源管理

## 联系方式

- **开发团队**: VoLtKid Team
- **Bundle ID**: team.VoLtKid
- **版本**: 1.0
- **更新日期**: 2025年8月25日

## 许可证

本项目采用 [MIT License](LICENSE) 开源协议。

## 更新日志

### v2.0 (2025-12-24) - 完整功能版本 ✅
- 🎉 **完整游戏系统**: 全功能六边形电路闯关游戏已完成
- ✨ **丰富用户体验**: 登录页、教程系统、角色管理全部实现
- 🎮 **核心游戏玩法**: 六边形网格、A*寻路、电路连接完整实现
- 📱 **跨页面导航**: 所有界面完成并建立完整导航体系
- 🔧 **技术架构完善**: SwiftUI + SpriteKit架构稳定运行

#### 🚀 新增功能
- **登录系统**: 精美的登录页面 + 首次启动教程引导
- **交互式教程**: 详细的步骤指导 + 手指动画引导
- **角色系统**: 5个角色 + 全局角色统一管理
- **提示撤销**: 游戏提示功能 + 操作撤销功能
- **界面优化**: 统一按钮样式 + 响应式设计

#### 🐛 Bug修复
- 修复角色选择不同步问题
- 修复游戏完成后闪退问题
- 修复按钮背景框显示问题
- 修复教程流程衔接问题

### v1.0 (2025-08-25) - 项目初始化
- 🎉 项目初始化，确立六边形电路闯关游戏概念
- ✨ 设计完整的多页面应用架构
- 📱 配置iOS 17+多平台支持
- 🔧 建立SwiftUI + SpriteKit技术栈
- 📋 创建详细的开发任务清单和进度跟踪

### 开发里程碑
- **当前状态**: ✅ 完整功能游戏已完成，可正式发布
- **已完成**: 5个主要开发阶段全部完成
- **完成度**: 100% - 包含所有核心功能和用户体验优化

---

**让我们一起为孩子们创造一个有趣的六边形电路学习世界！** ⚡️🎮📚🔥
